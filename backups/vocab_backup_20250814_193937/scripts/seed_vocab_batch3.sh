#!/usr/bin/env bash
set -euo pipefail

# 2062 からの ID を割り当てて 26 ファイルを生成します
REPO_ROOT="/Users/kentaroyoshizumi/Desktop/RissDojo"
OUT_DIR="$REPO_ROOT/questions/data/vocab"
mkdir -p "$OUT_DIR"

FILENAMES=(
  "social_engineering" "shoulder_hacking" "ransomware" "open_relay" "op25b"
  "bayesian_filter" "rlo" "double_extension" "spyware" "mail_bombing"
  "rootkit" "badnets" "adversarial_example" "prompt_injection" "worm"
  "trojan" "cc_malware" "downloader_malware" "polymorphic_virus" "darknet"
  "surface_web" "deep_web" "dark_web" "media_infection" "mail_infection" "macro_virus"
)

QUESTIONS=(
  "「ソーシャルエンジニアリング」とは何ですか？簡潔に説明してください。"
  "「ショルダーハッキング」とは何ですか？簡潔に説明してください。"
  "「ランサムウェア」とは何ですか？簡潔に説明してください。"
  "「第三者中継（オープンリレー）」とは何ですか？簡潔に説明してください。"
  "「OP25B（Outbound Port 25 Blocking）」とは何ですか？簡潔に説明してください。"
  "「ベイジアンフィルタリング」とは何ですか？簡潔に説明してください。"
  "「RLO（Right-to-Left Override）」とは何ですか？簡潔に説明してください。"
  "「二重拡張子」とは何ですか？簡潔に説明してください。"
  "「スパイウェア」とは何ですか？簡潔に説明してください。"
  "「メール爆撃」とは何ですか？簡潔に説明してください。"
  "「ルートキット」とは何ですか？簡潔に説明してください。"
  "「BadNets（バックドアが仕込まれたAIモデル）」とは何ですか？簡潔に説明してください。"
  "「敵対的サンプル攻撃」とは何ですか？簡潔に説明してください。"
  "「プロンプトインジェクション」とは何ですか？簡潔に説明してください。"
  "「ワーム（マルウェア）」とは何ですか？簡潔に説明してください。"
  "「トロイの木馬（マルウェア）」とは何ですか？簡潔に説明してください。"
  "「C&Cサーバ型（マルウェア）」とは何ですか？簡潔に説明してください。"
  "「ダウンロード型（マルウェア）」とは何ですか？簡潔に説明してください。"
  "「ポリモーフィック型ウィルス」とは何ですか？簡潔に説明してください。"
  "「ダークネット」とは何ですか？簡潔に説明してください。"
  "「サーフェスウェブ」とは何ですか？簡潔に説明してください。"
  "「ディープウェブ」とは何ですか？簡潔に説明してください。"
  "「ダークウェブ」とは何ですか？簡潔に説明してください。"
  "「媒体感染」とは何ですか？簡潔に説明してください。"
  "「メール感染」とは何ですか？簡潔に説明してください。"
  "「マクロウィルス」とは何ですか？簡潔に説明してください。"
)

ANSWERS=(
  "人を騙して機密情報や権限を引き出す手法。電話やメールや対面の心理的操作が中心。"
  "他人の画面やキーボードを覗き見して認証情報等を盗む行為。"
  "ファイルを暗号化して復号の対価を要求するマルウェア。"
  "認証なしでメールを中継可能に設定されたサーバで、スパム送信に悪用される状態。"
  "ISP 等が送信ポート25番を遮断する措置。ボット端末からの直接 SMTP 送信を防ぐ。"
  "単語出現確率などを学習してスパム判定する統計的手法。"
  "Unicode の制御文字を悪用してファイル名や表示を偽装する技術。"
  "ファイル名に複数の拡張子を付け、実行形式を隠す偽装手法。"
  "利用者の行動やデータを秘かに収集・送信する不正ソフトの総称。"
  "短時間に大量のメールを送って受信者やシステムを妨害する行為。"
  "痕跡隠蔽や持続化のためにOSやプロセスを改変するツール群。"
  "学習データを汚染して特定トリガで誤動作するよう仕込む攻撃/脆弱性。"
  "微小な摂動で機械学習モデルの誤分類を誘発する攻撃。"
  "LLM のプロンプトや指示を外部入力で上書きし誤動作させる攻撃。"
  "自己増殖しネットワークを通じて広がるマルウェア。"
  "正規のソフトに見せかけて侵入し不正機能を実行するマルウェア。"
  "外部の指令（C&C）と通信することで命令を受けるマルウェアの型。"
  "初期侵入後に外部から本体や追加ペイロードを取得して実行する型。"
  "自身のコードを変化させシグネチャ検知を回避するウィルス。"
  "特定の用途で観測や研究に使われる未割当IP等のネットワーク領域。"
  "検索エンジンにクロールされ索引化される公開Web領域。"
  "検索エンジンに索引化されないWeb領域（会員制等）。"
  "Tor等でアクセスする匿名化された秘匿領域（違法取引等が存在することもある）。"
  "USB等の外部媒体経由で感染/拡散する感染形態。"
  "メール添付やリンク経由で感染する感染形態。"
  "Office等のマクロ機能を悪用して拡散/実行されるウィルス。"
)

EXPLANATIONS=(
  "人の不注意や信頼を利用するため、教育と手続きの厳格化が基本対策。"
  "覗き見防止フィルムや席の配置、入力時の注意が有効。"
  "バックアップ運用や脆弱性管理、検知体制が重要。"
  "中継制御と認証必須化で防止できる。"
  "家庭内や業務端末の直接SMTP送信を阻止することでスパム抑止。"
  "しきい値調整とホワイトリスト/ブラックリストの運用が必要。"
  "ファイル名や表示の実体を確認する運用が有効。"
  "拡張子表示を有効化し、実行形式の確認を運用で徹底。"
  "振る舞い検知、EDR、許可制で対処する。"
  "レート制限やサーバ保護で緩和可能。"
  "検知が難しいため整合性検査や再インストールが必要となることが多い。"
  "サプライチェーン対策とモデル検証が重要。"
  "入力検査や堅牢な前処理で対策する。"
  "入力ベースの攻撃に対してはサニタイズが基本。"
  "パッチ適用とネットワーク分離が効果的。"
  "配布元確認やコード署名確認が基本的対策。"
  "出口対策と通信遮断で被害拡大を抑える。"
  "最小権限と実行制限が有効。"
  "振る舞い検知やサンドボックス検査が有効。"
  "公開情報中心の領域。"
  "一般的な公開サイト。"
  "業務システムや会員制サイト等が該当。"
  "匿名性の高い領域。"
  "外部媒体の利用制限や検査を行う。"
  "添付/リンクの検査やユーザ教育が重要。"
  "マクロ実行制限と署名付きマクロの採用が対策。"
)

# 基点のID
BASE_ID=2062

# 生成ループ（互換性確保のため通常配列を使用）
for i in "${!FILENAMES[@]}"; do
  id=$((BASE_ID + i))
  fname="${FILENAMES[i]}"
  q="${QUESTIONS[i]}"
  a="${ANSWERS[i]}"
  e="${EXPLANATIONS[i]}"

  # 出力ファイル名
  out="$OUT_DIR/${id}_${fname}.json"

  cat > "$out" <<JSON
{
  "id": ${id},
  "question": "${q}",
  "answer": "${a}",
  "explanation": "${e}",
  "category": "vocab"
}
JSON

  echo "Wrote: $out"
done

echo "Done."
